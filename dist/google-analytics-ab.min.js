!function(){var t={storage:"undefined"!=typeof localStorage?localStorage:{},create:function(t){if(this.init(name,percentage,options),this._isAlreadySorted()||(this._sortIsInCurrentTest()?this.storage[this.name]=this._sortOneOption().name:this.storage[this.name]=!1),this.storage[this.name]){var e=this._getCurrentOption();return this.selectedOption=e,run&&"function"==typeof run&&run.call(this,e),this}},init:function(t){this.name=t.name,this.percentage=t.percentage,this.options=t.options},convert:function(){return"function"!=typeof ga?(console.error("You must have the ga script in your page"),!1):(ga("send",{hitType:"event",eventCategory:"googleAnalyticsAB",eventAction:this.name,eventLabel:this.selectedOption.name,eventValue:1}),!0)},_getCurrentOption:function(){for(var t=this.storage[this.name],e=0,n=this.options.length;e<n;e++){var o=this.options[e];if(o.name===t)return o}},_isAlreadySorted:function(){return!(void 0===this.storage[this.name])},_sortIsInCurrentTest:function(){return this._randomBetween(0,100)<this.percentage},_randomBetween:function(t,e){return Math.floor(Math.random()*e)+t},_sortOneOption:function(){for(var t=this.options.reduce(function(t,e){return(t.weight||1)+(e.weight||1)}),e=this._randomBetween(1,t),n=0,o=this.options.length;n<o;n++)if((e-=this.options[n].weight||1)<=0)return this.options[n]}};"function"==typeof define&&define.amd?define("googleAnalyticsAB",[],t):"object"==typeof exports?module.exports=t:window.googleAnalyticsAB=t}();
!function(){var t={storage:"undefined"!=typeof localStorage?localStorage:{},create:function(t){if(this.init(t),this._isAlreadySorted()||(this._sortIsInCurrentTest()?this.storage[this.name]=this._sortOneOption().name:this.storage[this.name]=!1),this.storage[this.name]){var e=this._getCurrentOption();return e.convert=this.convert.bind(this),this.selectedOption=e,t.run&&"function"==typeof t.run&&t.run.call(this,e),this}},init:function(t){this.name=t.name,this.percentage=t.percentage||80,this.options=t.options.map(function(t){return Object.assign({},{weight:1},t)})},convert:function(){return"function"!=typeof ga?(console.error("You must have the ga script in your page"),!1):(ga("send",{hitType:"event",eventCategory:"googleAnalyticsAB",eventAction:this.name,eventLabel:this.selectedOption.name,eventValue:1}),!0)},_getCurrentOption:function(){for(var t=this.storage[this.name],e=0,n=this.options.length;e<n;e++){var i=this.options[e];if(i.name===t)return i}},_isAlreadySorted:function(){return!(void 0===this.storage[this.name])},_sortIsInCurrentTest:function(){return this._randomBetween(0,100)<this.percentage},_randomBetween:function(t,e){return Math.floor(Math.random()*e)+t},_sortOneOption:function(){for(var t=this.options.reduce(function(t,e){return t.weight+e.weight}),e=this._randomBetween(1,t),n=0,i=this.options.length;n<i;n++)if((e-=this.options[n].weight)<=0)return this.options[n]}};"function"==typeof define&&define.amd?define("googleAnalyticsAB",[],t):"object"==typeof exports?module.exports=t:window.googleAnalyticsAB=t}();